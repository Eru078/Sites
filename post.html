<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Blog Post</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
 
<!-- Scroll Progress Indicator -->
  <div id="scroll-indicator"></div>

<!-- Scroll Progress Bar -->
  <div id="progress-bar"></div>

<!-- Scroll to Top Button -->
<button id="scrollToTopBtn" title="Go to top"></button>

  <h1>Reading Post...</h1>
  <article id="content">Loading...</article>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
  const urlParams = new URLSearchParams(window.location.search);
  const file = urlParams.get('file');

  if (file) {
    fetch(`posts/${file}`)
      .then(res => res.text())
      .then(md => {
        document.getElementById('content').innerHTML = marked.parse(md);
      })
      .catch(() => {
        document.getElementById('content').textContent = 'Post not found.';
      });
  } else {
    document.getElementById('content').textContent = 'No post file specified.';
  }

  // Scroll progress bar
  window.addEventListener('scroll', () => {
    const winScroll = document.documentElement.scrollTop || document.body.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    document.getElementById("progress-bar").style.width = scrolled + "%";
  });

  // Scroll-to-top button
  const topBtn = document.getElementById("scrollToTopBtn");
  window.onscroll = () => {
    topBtn.style.display = (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300)
      ? "block" : "none";
  };
  topBtn.onclick = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
</script>
</body>
</html>